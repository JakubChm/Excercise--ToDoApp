const addInput=document.getElementById("add-field"),searchInput=document.getElementById("search-field"),addBtn=document.querySelector(".add-button"),ulToDo=document.querySelector(".todo-list__tasks"),ulDone=document.querySelector(".todo-list__tasks-done"),numberOfTasks=document.querySelector(".tasks-number"),completedTasts=document.querySelector(".doneTask-Number"),notCompletedTasks=document.querySelector(".toCompleteTask-Number"),todoList=[],doneList=[];let movedElementTextContent,filteredTodoList,filteredDoneList;const createElementComponent=(e,t,o,n,d)=>`<p class="li-content">${e}</p><div class="btn-container"><button class="todo-btn ${t}-btn">${o}</button><button class="todo-btn ${n}-btn">${d}</button></div>`,createTodoElement=e=>{const t=document.createElement("li");t.className="task",ulToDo.appendChild(t);const o=createElementComponent(e,"done","Done","delete","Delete");t.innerHTML=o,todoList.push(t)},createDoneElement=e=>{const t=e.target.parentNode.parentNode.dataset.id;movedElementTextContent=todoList[t].querySelector("p").textContent,console.log(movedElementTextContent),todoList.splice(t,1);const o=document.createElement("li");o.className="task",ulDone.appendChild(o);const n=createElementComponent(movedElementTextContent,"not-done","Not done","delete-done","Delete");o.innerHTML=n,doneList.push(o),updateList(todoList,ulToDo),updateList(doneList,ulDone),searchTask(),document.querySelectorAll(".delete-done-btn").forEach(e=>e.addEventListener("click",removeDoneTask)),document.querySelectorAll(".not-done-btn").forEach(e=>e.addEventListener("click",moveToTodoList))},moveToTodoList=e=>{const t=e.target.parentNode.parentNode.dataset.id;movedElementTextContent=doneList[t].querySelector("p").textContent,doneList.splice(t,1),createTodoElement(movedElementTextContent),updateList(todoList,ulToDo),updateList(doneList,ulDone),searchTask(),document.querySelectorAll(".delete-btn").forEach(e=>e.addEventListener("click",removeTask)),document.querySelectorAll(".done-btn").forEach(e=>e.addEventListener("click",createDoneElement))},updateList=(e,t)=>{t.textContent="",e.forEach((e,o)=>{t.appendChild(e),e.dataset.id=o}),setTaskNumber()},updateFilteredList=()=>{ulToDo.textContent="",filteredTodoList.forEach(e=>{ulToDo.appendChild(e)}),ulDone.textContent="",filteredDoneList.forEach(e=>{ulDone.appendChild(e)})},removeTask=e=>{const t=e.target.parentNode.parentNode.dataset.id;todoList.splice(t,1),updateList(todoList,ulToDo),setTaskNumber(),searchTask()},removeDoneTask=e=>{const t=e.target.parentNode.parentNode.dataset.id;doneList.splice(t,1),updateList(doneList,ulDone),setTaskNumber(),searchTask()},addTask=e=>{if(e.preventDefault(),""===addInput.value)return alert("You can't add an empty string to your TODO list. Please try one more time.");createTodoElement(addInput.value),updateList(todoList,ulToDo),searchTask(),addInput.value="",document.querySelectorAll(".delete-btn").forEach(e=>e.addEventListener("click",removeTask)),document.querySelectorAll(".done-btn").forEach(e=>e.addEventListener("click",createDoneElement))},searchTask=()=>{filteredTodoList=todoList.filter(e=>e.textContent.toLowerCase().includes(searchInput.value.toLowerCase())),filteredDoneList=doneList.filter(e=>e.textContent.toLowerCase().includes(searchInput.value.toLowerCase())),ulToDo.textContent="",filteredTodoList.forEach(e=>{ulToDo.appendChild(e)}),ulDone.textContent="",filteredDoneList.forEach(e=>{ulDone.appendChild(e)})},setTaskNumber=()=>{numberOfTasks.textContent=todoList.length+doneList.length,notCompletedTasks.textContent=todoList.length,completedTasts.textContent=doneList.length};addBtn.addEventListener("click",addTask),searchInput.addEventListener("input",searchTask);