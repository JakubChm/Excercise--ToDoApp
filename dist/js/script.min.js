const addInput=document.getElementById("add-field"),searchInput=document.getElementById("search-field"),addBtn=document.querySelector(".add-button"),ulToDo=document.querySelector(".todo-list__tasks"),ulDone=document.querySelector(".todo-list__tasks-done"),numberOfTasks=document.querySelector(".tasks-number"),completedTasts=document.querySelector(".doneTask-Number"),notCompletedTasks=document.querySelector(".toCompleteTask-Number"),todoList=[],doneList=[];let movedElementTextContent,filteredTodoList,filteredDoneList;const createElementComponent=(e,t,o,n,d)=>`<p class="li-content m-0 mx-2 d-flex align-items-center">${e}</p><div class="btn-container d-flex flex-nowrap"><button class="todo-btn btn ${t}-btn mr-1 shadow">${o}</button><button class="todo-btn btn ${n}-btn shadow">${d}</button></div>`,setTaskNumber=()=>{numberOfTasks.textContent=todoList.length+doneList.length,notCompletedTasks.textContent=todoList.length,completedTasts.textContent=doneList.length},updateList=(e,t)=>{t.textContent="",e.forEach((e,o)=>{t.appendChild(e),e.dataset.id=o}),setTaskNumber()},updateFilteredList=()=>{ulToDo.textContent="",filteredTodoList.forEach(e=>{ulToDo.appendChild(e)}),ulDone.textContent="",filteredDoneList.forEach(e=>{ulDone.appendChild(e)})},searchTask=e=>{e.preventDefault(),filteredTodoList=todoList.filter(e=>e.textContent.toLowerCase().includes(searchInput.value.toLowerCase())),filteredDoneList=doneList.filter(e=>e.textContent.toLowerCase().includes(searchInput.value.toLowerCase())),ulToDo.textContent="",filteredTodoList.forEach(e=>{ulToDo.appendChild(e)}),ulDone.textContent="",filteredDoneList.forEach(e=>{ulDone.appendChild(e)})},removeTask=e=>{const t=e.target.parentNode.parentNode.dataset.id;todoList.splice(t,1),updateList(todoList,ulToDo),setTaskNumber(),searchTask(e)},removeDoneTask=e=>{const t=e.target.parentNode.parentNode.dataset.id;doneList.splice(t,1),updateList(doneList,ulDone),setTaskNumber(),searchTask(e)},createTodoElement=e=>{const t=document.createElement("li");t.className="task list-group-item d-flex justify-content-between align items-center flex-grow-1 m-2 p-2 rounded shadow",ulToDo.appendChild(t);const o=createElementComponent(e,"btn-success done","Done","btn-danger delete","Delete");t.innerHTML=o,todoList.push(t)},createDoneElement=e=>{const t=e.target.parentNode.parentNode.dataset.id;movedElementTextContent=todoList[t].querySelector("p").textContent,todoList.splice(t,1);const o=document.createElement("li");o.className="task list-group-item d-flex justify-content-between align items-center flex-grow-1 m-2 p-2 rounded shadow",ulDone.appendChild(o);const n=createElementComponent(movedElementTextContent,"btn-danger not-done","Not done","btn-danger delete-done","Delete");o.innerHTML=n,doneList.push(o),updateList(todoList,ulToDo),updateList(doneList,ulDone),searchTask(e),document.querySelectorAll(".delete-done-btn").forEach(e=>e.addEventListener("click",removeDoneTask)),document.querySelectorAll(".not-done-btn").forEach(e=>e.addEventListener("click",moveToTodoList))},moveToTodoList=e=>{const t=e.target.parentNode.parentNode.dataset.id;movedElementTextContent=doneList[t].querySelector("p").textContent,doneList.splice(t,1),createTodoElement(movedElementTextContent),updateList(todoList,ulToDo),updateList(doneList,ulDone),searchTask(e),document.querySelectorAll(".delete-btn").forEach(e=>e.addEventListener("click",removeTask)),document.querySelectorAll(".done-btn").forEach(e=>e.addEventListener("click",createDoneElement))},addTask=e=>{e.preventDefault(),""===addInput.value?$("#exampleModalCenter").modal("show"):(createTodoElement(addInput.value),updateList(todoList,ulToDo),searchTask(e),addInput.value="",document.querySelectorAll(".delete-btn").forEach(e=>e.addEventListener("click",removeTask)),document.querySelectorAll(".done-btn").forEach(e=>e.addEventListener("click",createDoneElement)))};addBtn.addEventListener("click",addTask),searchInput.addEventListener("input",searchTask);